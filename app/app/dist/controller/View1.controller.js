sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","../model/formatter"],function(e,t,a,o,r){"use strict";return e.extend("app.controller.View1",{formatter:r,onInit:function(){var e=new a({title:"",stock:"",ID:null});this.getView().setModel(e,"localModel");var t=new a({result:[]});this.getView().setModel(t,"multiSaveModel");var o=new a({title:"",stock:"",ID:null,image:null});this.getView().setModel(o,"localModelFra")},navToView3:function(){this.getOwnerComponent().getRouter().navTo("RouteView3")},onAfterRendering:function(){var e=this.getView().byId("_IDGenWizard1");e.setCurrentStep(this.getView().byId("_IDGenWizardStep45"))},getTotalData:function(){var e=this.getOwnerComponent().getModel();var t=e.bindList("/Books");var a=e.bindContext("/Books");t.requestContexts().then(function(e,t){e.forEach(function(e,t){debugger})});a.requestObject("value").then(function(e){sap.m.MessageBox.success("DATA message should appear in the success message box",{title:"Success",onClose:null,styleClass:"",actions:sap.m.MessageBox.Action.CLOSE,emphasizedAction:null,initialFocus:nullJSON,textDirection:sap.ui.core.TextDirection.Inherit,details:JSON.stringify(e)})})},generateNew:function(){var e=this.getOwnerComponent().getModel();var t=this.getView().byId("idParamTable").getBinding("items").getHeaderContext();var a=e.bindList("/Books",t);a.attachCreateCompleted((t,a)=>{e.refresh()});var o=this.getView().getModel("localModel").getData();o.ID=parseInt(o.ID);o.stock=parseInt(o.stock);a.create(o)},generateNewList:function(){var e=this.getOwnerComponent().getModel();var a=this.getView().byId("idParamTable").getBinding("items");a.attachCreateCompleted((e,a)=>{t.success("creation succcessfull")});var o=this.getView().getModel("localModel").getData();o.ID=parseInt(o.ID);o.stock=parseInt(o.stock);a.create(o)},addToArray:function(){var e=this.getView().getModel("localModel");var t=this.getView().getModel("multiSaveModel");var a=JSON.parse(JSON.stringify(e.getData()));e.setData({title:"",stock:"",ID:""});var o=t.getProperty("/result");a.ID=parseInt(a.ID);a.stock=parseInt(a.stock);o.push(a);t.setProperty("/result",o);sap.m.MessageBox.success("DATA message should appear in the success message box",{title:"Success",onClose:null,styleClass:"",actions:sap.m.MessageBox.Action.CLOSE,emphasizedAction:null,initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit,details:JSON.stringify(o)})},saveArray:function(){var e=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/browse/",synchronizationMode:"None",operationMode:"Server",autoExpandSelect:true,earlyRequests:true,groupId:"$auto"});var a=e.bindList("/Books");var o=e.bindContext("/Books");var r=this.getView().getModel("multiSaveModel");var n=r.getData()["result"];a.attachCreateCompleted((e,a)=>{debugger;t.success("creation succcessfull")});n.forEach(e=>{a.create(e)})},deleteMultipleData:function(){var e=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/browse/",synchronizationMode:"None",operationMode:"Server",autoExpandSelect:true,earlyRequests:false,groupId:"$auto"});var a=this.byId("idParamTable").getSelectedItems();a.forEach(t=>{var a=t.getBindingContext().getObject();var o=`/Books(${a.ID})`;e.delete(o)});var o=e.bindContext("/Books");o.requestObject("value");e.submitBatch("API").then(e=>{t.success("Deletion and read Batch succcessfull")}).catch(e=>{t.success("Deletion Error")})},onItemDelete:function(){var e=this.byId("idParamTable").getSelectedItem();e.getBindingContext().delete("$auto").then(function(){t.success("Deleted content")}.bind(this),function(e){t.error(e.message)})},getGroupHeader(e){return new sap.m.GroupHeaderListItem({title:e.key})},getGroup:function(e){return e.getProperty("author")},checkHeaderAndModelParameters:function(){var e=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/browse/",synchronizationMode:"None",operationMode:"Server",autoExpandSelect:true,earlyRequests:true,groupId:"$auto"});var t=e.bindContext("{path'/Books' , urlParameters:{'param1' : '1'}}");t.requestObject().then(function(e){debugger})},Filtering:function(){var e=this.getView().byId("idParamTable").getBinding("items");var t=new sap.ui.model.Filter({path:"ID",operator:sap.ui.model.FilterOperator.EQ,value1:201});e.filter([t])},FunctionImport:function(){var e=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/browse/",synchronizationMode:"None",operationMode:"Server",autoExpandSelect:true,earlyRequests:true,groupId:"$direct"});var a=e.bindContext("/getCustomerPayload()");a.requestObject("value").then(function(e){t.success(e)}).catch(e=>t.error(e.message))},FunctionImportObj:function(){var e=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/browse/",synchronizationMode:"None",operationMode:"Server",autoExpandSelect:true,earlyRequests:true,groupId:"$direct"});var a=e.bindContext("/getCustomerPayloadObj(id=@id)?@id='1'");a.requestObject("value").then(function(e){sap.m.MessageBox.success("DATA message should appear in the success message box",{title:"Success",onClose:null,styleClass:"",actions:sap.m.MessageBox.Action.CLOSE,emphasizedAction:null,initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit,details:JSON.stringify(e)})}).catch(e=>t.error(e.message))},multipleCreateUsingUpdateId:function(){var e=this.getView().getModel("multiSaveModel");var t=e.getProperty("/result");var a=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/browse/",synchronizationMode:"None",operationMode:"Server",autoExpandSelect:true,earlyRequests:true,updateGroupId:"fullCreateSync"});var o=a.bindList("/Books");var r=this.getView().getModel("localModel").getData();o.attachCreateCompleted((e,t)=>{debugger});t.forEach(e=>{e.ID=parseInt(e.ID);e.stock=parseInt(e.stock);o.create(e)});var n=function(e){debugger}.bind(this);var s=function(e){debugger}.bind(this);a.submitBatch("fullCreateSync").then(n,s)},getETagCorrelation:function(){var e=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/browse/",synchronizationMode:"None",operationMode:"Server",autoExpandSelect:true,earlyRequests:true,updateGroupId:"fullCreateSync",httpHeaders:{customAvinash:"avinash"}});var a=e.bindContext("/getETagCorrelation()");a.requestObject("value").then(function(e){t.success(e)}).catch(e=>t.error(e.message))},openCreateBookDialog:function(){if(!this.pDialog){this.pDialog=this.loadFragment({name:"app.fragments.Image"})}this.pDialog.then(e=>{this.myDialog=e;this.myDialog.open()})},generateNewCurrency:function(){},storeInUI:function(){var e=document.createElement("input");e.type="file";e.onchange=e=>{var t=e.target.files[0];var a=new FileReader;this.oPayload;a.fileName=t.name;this.type=t.type;a.readAsDataURL(t);a.onload=function(e){var t=e.target.result;var a=t.substring(t.indexOf(",")+1,t.length);this.oPayload=a.toString();this.mime=t.split(";")[0].split(":")[1]}.bind(this)};e.click()},storeBackend:function(){var e=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/browse/",synchronizationMode:"None",operationMode:"Server",autoExpandSelect:true,earlyRequests:true,groupId:"$auto"});var t=e.bindList("/Books");var a=this.myDialog.getModel("localModelFra").getData();a.ID=parseInt(a.ID);a.stock=parseInt(a.stock);a.image=this.oPayload;t.create(a);t.attachCreateCompleted((e,t)=>{this.getOwnerComponent().getModel().refresh()})},downloadAttachment:function(){var e=this.getOwnerComponent().getModel();var t=this.byId("idParamTable3").getSelectedItem();var a=t.getBindingContext().getObject();var o=e.bindProperty(`/Books(ID=${a.ID})/image`);o.requestValue().then(function(e){var t=atob(e);var a=new ArrayBuffer(t.length);var o=new Uint8Array(a);for(var r=0;r<t.length;r++){o[r]=t.charCodeAt(r)}var n=new Blob([a],{type:this.type});var s=window.URL.createObjectURL(n);sap.m.URLHelper.redirect(s,true)}.bind(this))},addSequential:function(){var e=this.getOwnerComponent().getModel("authors");var t=e.bindList("/Authors");var a={ID:130,name:"Avinash change"};t.attachCreateCompleted((e,t)=>{var a=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/admin/",synchronizationMode:"None",operationMode:"Server",autoExpandSelect:true,earlyRequests:true,updateGroupId:"myGroup"});var o=a.bindList(`${e.getParameter("context").getPath()}/books`,{$$updateGroupId:"myGroup",bSkipRefresh:true});var r=[{ID:2222,title:"Avinash Title"},{ID:2223,title:"Avinash Book"}];r.forEach(e=>{o.create(e,{bSkipRefresh:true})});a.submitBatch("myGroup").then(e=>{debugger})});t.create(a,{bSkipRefresh:true})},onTotalRefresh:function(){var e=this.getOwnerComponent().getModel("authors");e.refresh();e.refresh()},saveArrayPromise:function(){var e=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/browse/",synchronizationMode:"None",operationMode:"Server",autoExpandSelect:true,earlyRequests:true,groupId:"$auto"});var t=e.bindList("/Books");var a=[{ID:2222,title:"Avinash Title"},{ID:2223,title:"Avinash Book"}];var o=[];a.forEach(e=>{o.push(t.create(e).created())});Promise.all(o).then(e=>{debugger})},EditOrPutCall:function(){var e=new sap.ui.model.odata.v4.ODataModel({serviceUrl:"/admin/",synchronizationMode:"None",operationMode:"Server",autoExpandSelect:true,earlyRequests:true,updateGroupId:"myGroupEdit"});debugger;var a=this.getView().byId("idParamTable35").getBinding("items").getHeaderContext();var o=e.bindContext(`/Authors(ID=170)`,a);var r=e.bindContext(`/Authors(ID=150)`,a);Promise.all([o.getBoundContext().setProperty("name","Tester second"),o.getBoundContext().setProperty("placeOfDeath","Ambala"),r.getBoundContext().setProperty("name","Tester first"),r.getBoundContext().setProperty("placeOfDeath",111)]).then(()=>{debugger}).catch(e=>{t.error(e.error.message)});e.submitBatch("myGroupEdit").then(e=>{debugger})},navToView2:function(){this.getOwnerComponent().getRouter().navTo("RouteView2")},navToView4:function(){this.getOwnerComponent().getRouter().navTo("RouteView4")},onItemUpdate:function(){var e=this.byId("idParamTable").getSelectedItem();var a=this.byId("idParamTable").getModel();Promise.all([e.getBindingContext().setProperty("title","alphasBetas")]).then(()=>{t.success("updated")}).catch(e=>{t.error(e.message)});a.submitBatch("peopleGroup")},onItemCreate:function(){var e=this.byId("idParamTable").getBinding("items");var a=this.byId("idParamTable").getModel();var o={};o.ID=300;o.stock=30;o.title="Avinash";Promise.all([e.create(o)]).then(()=>{t.success("updated")}).catch(e=>{t.error(e.message)})}})});